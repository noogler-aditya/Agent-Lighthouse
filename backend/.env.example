# Agent Lighthouse Backend Environment Template
# Copy to: backend/.env

APP_ENV=development
BUILD_VERSION=dev

# Redis
REDIS_URL=redis://localhost:6379
REDIS_CONNECT_TIMEOUT_SECONDS=5
REDIS_REQUIRED_APPENDONLY=yes
REDIS_REQUIRED_SAVE=
REDIS_ENFORCE_PERSISTENCE_POLICY=false

# CORS
ALLOWED_ORIGINS=http://localhost:5173
CORS_ALLOW_CREDENTIALS=false

# Auth
REQUIRE_AUTH=true
SUPABASE_URL=http://localhost:54321
SUPABASE_JWT_ISSUER=http://localhost:54321/auth/v1
SUPABASE_JWT_AUDIENCE=authenticated
SUPABASE_ROLE_CLAIM=app_metadata.role
SUPABASE_ROLE_MAP=authenticated:viewer,service_role:admin

# Machine keys (SDK ingestion): key:scope|scope, comma-separated
MACHINE_API_KEYS=local-dev-key:trace:write|trace:read

# Optional legacy single key fallback (used only when MACHINE_API_KEYS is empty)
LIGHTHOUSE_API_KEY=

# Trace retention
TRACE_TTL_HOURS=24

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_SECONDS=60
RATE_LIMIT_READ_PER_WINDOW=300
RATE_LIMIT_WRITE_PER_WINDOW=120
RATE_LIMIT_WS_CONNECT_PER_WINDOW=60
RATE_LIMIT_WS_SUBSCRIBE_PER_WINDOW=180

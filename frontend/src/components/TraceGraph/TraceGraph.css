.agent-node,
.tool-node,
.llm-node {
  background: #ffffff;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 12px;
  min-width: 196px;
  transition: box-shadow var(--transition-fast), transform var(--transition-fast), border-color var(--transition-fast);
  box-shadow: var(--shadow-sm);
}

.agent-node:hover,
.tool-node:hover,
.llm-node:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

.agent-node {
  border-left: 4px solid #4f46e5;
}

.tool-node {
  border-left: 4px solid #059669;
}

.llm-node {
  border-left: 4px solid #7c3aed;
}

.status-running {
  box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.26), var(--shadow-sm);
}

.status-success {
  border-color: #bbf7d0;
}

.status-error {
  border-color: #fecaca;
  background: #fff9f9;
}

@keyframes pulse-border {
  0%,
  100% {
    box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.32);
  }

  50% {
    box-shadow: 0 0 0 5px rgba(37, 99, 235, 0);
  }
}

.node-header {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-bottom: 8px;
}

.node-icon {
  width: 18px;
  height: 18px;
}

.node-title {
  font-weight: 640;
  font-size: 0.9rem;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 150px;
}

.node-model {
  font-size: 0.75rem;
  color: var(--text-secondary);
  margin-bottom: 8px;
  padding: 2px 7px;
  background: #eef2ff;
  border: 1px solid #dbeafe;
  border-radius: var(--radius-sm);
  display: inline-block;
}

.node-metrics {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border-primary);
}

.metric {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 48px;
}

.metric-label {
  font-size: 0.64rem;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.metric-value {
  font-size: 0.79rem;
  font-weight: 620;
  color: var(--text-secondary);
}

.node-error {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-xs) var(--space-sm);
  background: #fee2e2;
  border: 1px solid #fecaca;
  border-radius: var(--radius-sm);
  margin-top: var(--space-sm);
}

.error-icon,
.error-text {
  color: #b91c1c;
}

.error-text {
  font-size: 0.73rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 130px;
}

.react-flow__handle {
  width: 9px;
  height: 9px;
  background: #64748b;
  border: 2px solid #fff;
}

.react-flow__handle-top {
  top: -5px;
}

.react-flow__handle-bottom {
  bottom: -5px;
}

.react-flow__edge-path {
  stroke: rgba(51, 65, 85, 0.38);
  stroke-width: 1.8;
}

.react-flow__edge.animated .react-flow__edge-path {
  stroke: #2563eb;
  animation: dash 1s linear infinite;
}

@keyframes dash {
  to {
    stroke-dashoffset: -10;
  }
}

.trace-graph-container {
  width: 100%;
  height: 100%;
  background: radial-gradient(circle at 10% 0%, rgba(14, 165, 168, 0.08) 0%, rgba(14, 165, 168, 0) 45%), linear-gradient(180deg, #f9fbfd 0%, #f4f7fb 100%);
}

.trace-graph-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--text-muted);
  gap: var(--space-sm);
}

.trace-graph-empty .empty-icon {
  width: 42px;
  height: 42px;
  opacity: 0.7;
  color: #0891b2;
}

.trace-graph-empty .empty-text {
  font-size: 1.1rem;
  color: var(--text-primary);
  font-weight: 640;
}

.trace-graph-empty .empty-hint {
  font-size: 0.87rem;
  color: var(--text-secondary);
}

.trace-graph-container .react-flow__panel {
  background: rgba(255, 255, 255, 0.92);
  border: 1px solid var(--panel-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
  backdrop-filter: blur(6px);
}

.trace-graph-container .react-flow__controls {
  border: none;
  box-shadow: none;
}

.trace-graph-container .react-flow__controls-button {
  border: none;
  color: var(--text-secondary);
}

.trace-graph-container .react-flow__controls-button:hover {
  color: var(--text-primary);
}

.trace-graph-container .react-flow__minimap {
  border: none;
  background: transparent !important;
}

.trace-graph-container .react-flow__attribution {
  display: none;
}
